<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mohammed Saqhib | Interactive 3D Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="photos/logo.png" />
    
    <style>
        :root {
            --primary: #58a6ff;
            --secondary: #ff7b72;
            --accent: #f78c6c;
            --background: #0d1117;
            --surface: #161b22;
            --text: #ffffff;
            --text-secondary: #8b949e;
            --success: #56d364;
            --warning: #e3b341;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--background);
            color: var(--text);
            overflow: hidden;
            cursor: none;
            user-select: none;
        }

        /* Canvas */
        .canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
            outline: none;
        }

        /* Custom Cursor */
        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.1s ease;
            transform: translate(-50%, -50%);
            mix-blend-mode: difference;
        }

        .cursor.hover {
            transform: translate(-50%, -50%) scale(1.8);
            background: var(--primary);
            border-color: transparent;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--background);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-content {
            text-align: center;
            max-width: 400px;
        }

        .loading-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            opacity: 0.8;
        }

        .loading-progress {
            width: 300px;
            height: 4px;
            background: var(--surface);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        .loading-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 1rem;
        }

        /* UI Overlay */
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* Header */
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 30px;
            background: rgba(13, 17, 23, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(88, 166, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: auto;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Controls Panel */
        .controls-panel {
            position: absolute;
            bottom: 30px;
            left: 30px;
            background: rgba(22, 27, 34, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(88, 166, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            pointer-events: auto;
            max-width: 300px;
        }

        .controls-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .control-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .control-key {
            background: var(--surface);
            border: 1px solid rgba(88, 166, 255, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 10px;
            min-width: 25px;
            text-align: center;
            font-weight: 600;
            font-size: 0.75rem;
        }

        /* Speed Indicator */
        .speed-indicator {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: rgba(22, 27, 34, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(88, 166, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            pointer-events: auto;
            min-width: 120px;
        }

        .speed-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .speed-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Section Info Panel */
        .section-panel {
            position: absolute;
            top: 50%;
            right: 30px;
            width: 400px;
            max-height: 70vh;
            background: rgba(22, 27, 34, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(88, 166, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            transform: translateY(-50%) translateX(100%);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            pointer-events: auto;
        }

        .section-panel.visible {
            transform: translateY(-50%) translateX(0);
        }

        .section-panel h2 {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
        }

        .section-panel h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .section-panel h3 {
            color: var(--text);
            font-size: 1.1rem;
            font-weight: 600;
            margin: 20px 0 10px 0;
        }

        .section-panel p {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .section-panel ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .section-panel li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        /* Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .skill-tag {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--background);
            padding: 8px 12px;
            border-radius: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 0.75rem;
            transition: transform 0.3s ease;
        }

        .skill-tag:hover {
            transform: translateY(-2px) scale(1.05);
        }

        /* Current Section Indicator */
        .current-section {
            position: absolute;
            top: 120px;
            right: 30px;
            background: rgba(22, 27, 34, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(88, 166, 255, 0.2);
            border-radius: 15px;
            padding: 15px 20px;
            font-weight: 600;
            color: var(--primary);
            text-align: center;
            pointer-events: auto;
            min-width: 150px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }
            
            .nav-links {
                display: none;
            }
            
            .section-panel {
                right: 15px;
                left: 15px;
                width: auto;
                max-width: none;
                transform: translateY(-50%) translateY(100vh);
            }
            
            .section-panel.visible {
                transform: translateY(-50%) translateY(0);
            }
            
            .controls-panel, .current-section {
                left: 15px;
                right: 15px;
                max-width: none;
            }
            
            .speed-indicator {
                right: 15px;
                left: auto;
            }
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Custom Scrollbar */
        .section-panel::-webkit-scrollbar {
            width: 6px;
        }

        .section-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .section-panel::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Canvas -->
    <canvas class="canvas js-canvas"></canvas>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-title">MOHAMMED SAQHIB</div>
            <div class="loading-subtitle">Data Professional • Interactive Portfolio</div>
            <div class="loading-progress">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            <div class="loading-text" id="loadingText">Loading experience...</div>
        </div>
    </div>

    <!-- UI Overlay -->
    <div class="ui-overlay">
        <!-- Header -->
        <div class="header">
            <a href="#" class="logo">MOHAMMED SAQHIB</a>
            <nav>
                <ul class="nav-links">
                    <li><a href="#" data-section="about">About</a></li>
                    <li><a href="#" data-section="skills">Skills</a></li>
                    <li><a href="#" data-section="projects">Projects</a></li>
                    <li><a href="#" data-section="contact">Contact</a></li>
                </ul>
            </nav>
        </div>

        <!-- Current Section -->
        <div class="current-section" id="currentSection">
            Welcome
        </div>

        <!-- Controls Panel -->
        <div class="controls-panel">
            <div class="controls-title">🎮 Controls</div>
            <div class="control-item">
                <div class="control-key">W</div>
                <span>Accelerate</span>
            </div>
            <div class="control-item">
                <div class="control-key">S</div>
                <span>Brake/Reverse</span>
            </div>
            <div class="control-item">
                <div class="control-key">A</div>
                <span>Turn Left</span>
            </div>
            <div class="control-item">
                <div class="control-key">D</div>
                <span>Turn Right</span>
            </div>
            <div class="control-item">
                <div class="control-key">Space</div>
                <span>Handbrake</span>
            </div>
        </div>

        <!-- Speed Indicator -->
        <div class="speed-indicator">
            <div class="speed-value" id="speedValue">0</div>
            <div class="speed-label">km/h</div>
        </div>

        <!-- Section Info Panel -->
        <div class="section-panel" id="sectionPanel">
            <h2>Welcome</h2>
            <p>Drive around this interactive 3D world to explore my portfolio. Each area contains different aspects of my work and skills.</p>
            <h3>What you'll find:</h3>
            <ul>
                <li>🎯 About my background in Data Science</li>
                <li>💼 Professional projects and achievements</li>
                <li>🛠️ Technical skills and expertise</li>
                <li>📞 Contact information</li>
            </ul>
            <p>Use WASD keys to drive and explore!</p>
        </div>
    </div>

    <!-- Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cannon@0.20.0/build/cannon.min.js"></script>

    <script>
        // Portfolio data
        const portfolioSections = {
            about: {
                title: "About Mohammed Saqhib",
                content: `
                    <h3>Data Science Professional</h3>
                    <p>Aspiring Data Science and Analytics Professional with proficiency in data analysis, data visualization, and data engineering. Skilled in transforming complex datasets into actionable insights through statistical analysis and machine learning techniques.</p>
                    
                    <h3>Background</h3>
                    <p>Based in Bengaluru, I specialize in:</p>
                    <ul>
                        <li>📊 Data Analysis & Visualization</li>
                        <li>🤖 Machine Learning & AI</li>
                        <li>🏗️ Data Engineering</li>
                        <li>📈 Business Intelligence</li>
                        <li>☁️ Cloud Technologies</li>
                    </ul>
                    
                    <h3>Education & Certifications</h3>
                    <p>Continuously learning and growing in the field of data science with hands-on experience in real-world projects.</p>
                `
            },
            skills: {
                title: "Technical Skills",
                content: `
                    <h3>Programming Languages</h3>
                    <div class="skills-grid">
                        <div class="skill-tag">Python</div>
                        <div class="skill-tag">SQL</div>
                        <div class="skill-tag">R</div>
                        <div class="skill-tag">JavaScript</div>
                        <div class="skill-tag">HTML/CSS</div>
                    </div>
                    
                    <h3>Data Science & ML</h3>
                    <div class="skills-grid">
                        <div class="skill-tag">Pandas</div>
                        <div class="skill-tag">NumPy</div>
                        <div class="skill-tag">Scikit-learn</div>
                        <div class="skill-tag">TensorFlow</div>
                        <div class="skill-tag">PyTorch</div>
                        <div class="skill-tag">Matplotlib</div>
                        <div class="skill-tag">Seaborn</div>
                    </div>
                    
                    <h3>Data Engineering & Cloud</h3>
                    <div class="skills-grid">
                        <div class="skill-tag">AWS</div>
                        <div class="skill-tag">Azure</div>
                        <div class="skill-tag">Apache Spark</div>
                        <div class="skill-tag">Hadoop</div>
                        <div class="skill-tag">Docker</div>
                    </div>
                    
                    <h3>Visualization Tools</h3>
                    <div class="skills-grid">
                        <div class="skill-tag">Tableau</div>
                        <div class="skill-tag">Power BI</div>
                        <div class="skill-tag">Plotly</div>
                        <div class="skill-tag">D3.js</div>
                    </div>
                `
            },
            projects: {
                title: "Featured Projects",
                content: `
                    <h3>🎯 Advanced Stock Prediction Dashboard</h3>
                    <p>Machine learning-powered stock market analysis tool with real-time predictions and interactive visualizations.</p>
                    
                    <h3>🚗 Carpooling Optimization System</h3>
                    <p>Data-driven solution for optimizing carpooling routes using geospatial analysis and machine learning algorithms.</p>
                    
                    <h3>🎭 Facial Recognition Attendance System</h3>
                    <p>Computer vision-based attendance management system with real-time face detection and recognition capabilities.</p>
                    
                    <h3>🏎️ Formula 1 Data Analytics Hub</h3>
                    <p>Comprehensive F1 data analysis platform with race predictions, driver performance analytics, and team comparisons.</p>
                    
                    <h3>🛡️ Fraud Detection System</h3>
                    <p>Advanced anomaly detection system for financial fraud prevention using ensemble machine learning techniques.</p>
                    
                    <h3>📊 AI-Powered CSV Dashboard Generator</h3>
                    <p>Automated dashboard creation tool that generates insights and visualizations from uploaded CSV files using AI.</p>
                    
                    <p><strong>🔗 Links:</strong></p>
                    <ul>
                        <li><a href="https://github.com/Mohammed-Saqhib" target="_blank">GitHub Portfolio</a></li>
                        <li><a href="http://www.linkedin.com/in/mohammed-saqhib-87b8b325a" target="_blank">LinkedIn Profile</a></li>
                    </ul>
                `
            },
            contact: {
                title: "Get In Touch",
                content: `
                    <h3>Let's Connect!</h3>
                    <p>I'm always interested in discussing data science opportunities, collaborating on projects, or just having a chat about the latest in AI and machine learning.</p>
                    
                    <h3>📧 Contact Information</h3>
                    <ul>
                        <li><strong>Email:</strong> <a href="mailto:msaqhib76@gmail.com">msaqhib76@gmail.com</a></li>
                        <li><strong>LinkedIn:</strong> <a href="http://www.linkedin.com/in/mohammed-saqhib-87b8b325a" target="_blank">mohammed-saqhib</a></li>
                        <li><strong>GitHub:</strong> <a href="https://github.com/Mohammed-Saqhib" target="_blank">Mohammed-Saqhib</a></li>
                        <li><strong>Location:</strong> Bengaluru, India</li>
                    </ul>
                    
                    <h3>🤝 Open to Opportunities</h3>
                    <ul>
                        <li>Data Science & Analytics Roles</li>
                        <li>Machine Learning Projects</li>
                        <li>Data Engineering Positions</li>
                        <li>Consulting & Freelance Work</li>
                        <li>Research Collaborations</li>
                    </ul>
                    
                    <p>Feel free to reach out – I'd love to hear from you!</p>
                `
            }
        };

        // Application class
        class Application {
            constructor() {
                this.canvas = document.querySelector('.js-canvas');
                this.loadingScreen = document.getElementById('loadingScreen');
                this.loadingBar = document.getElementById('loadingBar');
                this.loadingText = document.getElementById('loadingText');
                
                this.loadingProgress = 0;
                
                // Initialize
                this.setScene();
                this.setCamera();
                this.setRenderer();
                this.setPhysics();
                this.setCursor();
                this.setControls();
                this.setWorld();
                this.setCar();
                this.setUI();
                this.setResize();
                this.setTick();
                
                // Start loading
                this.startLoading();
            }
            
            setScene() {
                this.scene = new THREE.Scene();
                this.scene.fog = new THREE.Fog(0x0d1117, 50, 200);
            }
            
            setCamera() {
                this.camera = new THREE.PerspectiveCamera(
                    75,
                    window.innerWidth / window.innerHeight,
                    0.1,
                    1000
                );
                this.camera.position.set(0, 15, 20);
            }
            
            setRenderer() {
                this.renderer = new THREE.WebGLRenderer({
                    canvas: this.canvas,
                    antialias: true,
                    powerPreference: 'high-performance'
                });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                this.renderer.setClearColor(0x0d1117);
                this.renderer.shadowMap.enabled = true;
                this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            }
            
            setPhysics() {
                this.world = new CANNON.World();
                this.world.gravity.set(0, -9.82, 0);
                this.world.broadphase = new CANNON.NaiveBroadphase();
                this.world.solver.iterations = 10;
            }
            
            setCursor() {
                this.cursor = document.getElementById('cursor');
                
                window.addEventListener('mousemove', (e) => {
                    this.cursor.style.left = e.clientX + 'px';
                    this.cursor.style.top = e.clientY + 'px';
                });
                
                // Hover effects
                const hoverElements = document.querySelectorAll('a, button, .control-key');
                hoverElements.forEach(el => {
                    el.addEventListener('mouseenter', () => {
                        this.cursor.classList.add('hover');
                    });
                    el.addEventListener('mouseleave', () => {
                        this.cursor.classList.remove('hover');
                    });
                });
            }
            
            setControls() {
                this.keys = {
                    forward: false,
                    backward: false,
                    left: false,
                    right: false,
                    brake: false
                };
                
                // Keyboard events
                window.addEventListener('keydown', (e) => {
                    switch(e.code) {
                        case 'KeyW':
                        case 'ArrowUp':
                            this.keys.forward = true;
                            break;
                        case 'KeyS':
                        case 'ArrowDown':
                            this.keys.backward = true;
                            break;
                        case 'KeyA':
                        case 'ArrowLeft':
                            this.keys.left = true;
                            break;
                        case 'KeyD':
                        case 'ArrowRight':
                            this.keys.right = true;
                            break;
                        case 'Space':
                            this.keys.brake = true;
                            e.preventDefault();
                            break;
                    }
                });
                
                window.addEventListener('keyup', (e) => {
                    switch(e.code) {
                        case 'KeyW':
                        case 'ArrowUp':
                            this.keys.forward = false;
                            break;
                        case 'KeyS':
                        case 'ArrowDown':
                            this.keys.backward = false;
                            break;
                        case 'KeyA':
                        case 'ArrowLeft':
                            this.keys.left = false;
                            break;
                        case 'KeyD':
                        case 'ArrowRight':
                            this.keys.right = false;
                            break;
                        case 'Space':
                            this.keys.brake = false;
                            break;
                    }
                });
            }
            
            setWorld() {
                // Create ground
                const groundGeometry = new THREE.PlaneGeometry(200, 200);
                const groundMaterial = new THREE.MeshLambertMaterial({ 
                    color: 0x161b22,
                    transparent: true,
                    opacity: 0.8
                });
                this.ground = new THREE.Mesh(groundGeometry, groundMaterial);
                this.ground.rotation.x = -Math.PI / 2;
                this.ground.receiveShadow = true;
                this.scene.add(this.ground);
                
                // Ground physics
                const groundShape = new CANNON.Plane();
                this.groundBody = new CANNON.Body({ mass: 0 });
                this.groundBody.addShape(groundShape);
                this.groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);
                this.world.add(this.groundBody);
                
                // Add portfolio sections as 3D objects
                this.createPortfolioSections();
                
                // Add decorative elements
                this.createDecorations();
                
                // Add lighting
                this.setLighting();
            }
            
            createPortfolioSections() {
                const sections = [
                    { name: 'about', position: [20, 2, 0], color: 0x58a6ff },
                    { name: 'skills', position: [-20, 2, 0], color: 0xff7b72 },
                    { name: 'projects', position: [0, 2, 20], color: 0x56d364 },
                    { name: 'contact', position: [0, 2, -20], color: 0xe3b341 }
                ];
                
                this.sectionMeshes = {};
                
                sections.forEach(section => {
                    // Create visual platform
                    const geometry = new THREE.CylinderGeometry(8, 8, 1, 32);
                    const material = new THREE.MeshPhongMaterial({ 
                        color: section.color,
                        transparent: true,
                        opacity: 0.7
                    });
                    const mesh = new THREE.Mesh(geometry, material);
                    mesh.position.set(...section.position);
                    mesh.castShadow = true;
                    mesh.receiveShadow = true;
                    this.scene.add(mesh);
                    
                    // Add floating text
                    this.createSectionText(section.name, section.position);
                    
                    this.sectionMeshes[section.name] = mesh;
                });
            }
            
            createSectionText(sectionName, position) {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 512;
                canvas.height = 256;
                
                context.fillStyle = 'rgba(13, 17, 23, 0.8)';
                context.fillRect(0, 0, canvas.width, canvas.height);
                
                context.fillStyle = '#ffffff';
                context.font = 'bold 48px Inter';
                context.textAlign = 'center';
                context.fillText(sectionName.toUpperCase(), canvas.width / 2, canvas.height / 2);
                
                const texture = new THREE.CanvasTexture(canvas);
                const material = new THREE.MeshBasicMaterial({ 
                    map: texture, 
                    transparent: true 
                });
                const geometry = new THREE.PlaneGeometry(8, 4);
                const textMesh = new THREE.Mesh(geometry, material);
                textMesh.position.set(position[0], position[1] + 3, position[2]);
                textMesh.lookAt(this.camera.position);
                this.scene.add(textMesh);
            }
            
            createDecorations() {
                // Add some decorative cubes
                for (let i = 0; i < 20; i++) {
                    const geometry = new THREE.BoxGeometry(
                        Math.random() * 2 + 1,
                        Math.random() * 4 + 2,
                        Math.random() * 2 + 1
                    );
                    const material = new THREE.MeshPhongMaterial({ 
                        color: new THREE.Color().setHSL(Math.random(), 0.7, 0.6),
                        transparent: true,
                        opacity: 0.8
                    });
                    const cube = new THREE.Mesh(geometry, material);
                    
                    cube.position.set(
                        (Math.random() - 0.5) * 80,
                        geometry.parameters.height / 2,
                        (Math.random() - 0.5) * 80
                    );
                    
                    cube.castShadow = true;
                    cube.receiveShadow = true;
                    this.scene.add(cube);
                }
            }
            
            setLighting() {
                // Ambient light
                const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
                this.scene.add(ambientLight);
                
                // Directional light
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(10, 20, 10);
                directionalLight.castShadow = true;
                directionalLight.shadow.mapSize.width = 2048;
                directionalLight.shadow.mapSize.height = 2048;
                directionalLight.shadow.camera.near = 0.5;
                directionalLight.shadow.camera.far = 50;
                directionalLight.shadow.camera.left = -50;
                directionalLight.shadow.camera.right = 50;
                directionalLight.shadow.camera.top = 50;
                directionalLight.shadow.camera.bottom = -50;
                this.scene.add(directionalLight);
                
                // Point lights for sections
                const colors = [0x58a6ff, 0xff7b72, 0x56d364, 0xe3b341];
                const positions = [[20, 5, 0], [-20, 5, 0], [0, 5, 20], [0, 5, -20]];
                
                positions.forEach((pos, i) => {
                    const light = new THREE.PointLight(colors[i], 0.5, 30);
                    light.position.set(...pos);
                    this.scene.add(light);
                });
            }
            
            setCar() {
                // Create car
                const carGeometry = new THREE.BoxGeometry(2, 1, 4);
                const carMaterial = new THREE.MeshPhongMaterial({ color: 0x58a6ff });
                this.car = new THREE.Mesh(carGeometry, carMaterial);
                this.car.position.set(0, 1, 0);
                this.car.castShadow = true;
                this.scene.add(this.car);
                
                // Car physics
                const carShape = new CANNON.Box(new CANNON.Vec3(1, 0.5, 2));
                this.carBody = new CANNON.Body({ mass: 5 });
                this.carBody.addShape(carShape);
                this.carBody.position.set(0, 1, 0);
                this.carBody.material = new CANNON.Material();
                this.carBody.material.friction = 0.4;
                this.carBody.material.restitution = 0.3;
                this.world.add(this.carBody);
                
                // Car properties
                this.carSpeed = 0;
                this.carMaxSpeed = 20;
                this.carAcceleration = 0.3;
                this.carFriction = 0.95;
                this.carTurnSpeed = 0.03;
            }
            
            setUI() {
                this.speedValue = document.getElementById('speedValue');
                this.currentSection = document.getElementById('currentSection');
                this.sectionPanel = document.getElementById('sectionPanel');
                
                this.currentSectionName = 'welcome';
                this.checkInterval = setInterval(() => this.checkCarPosition(), 100);
            }
            
            checkCarPosition() {
                const carPos = this.car.position;
                let nearestSection = 'welcome';
                let minDistance = Infinity;
                
                // Check distance to each section
                Object.keys(this.sectionMeshes).forEach(sectionName => {
                    const sectionPos = this.sectionMeshes[sectionName].position;
                    const distance = carPos.distanceTo(sectionPos);
                    
                    if (distance < 15 && distance < minDistance) {
                        minDistance = distance;
                        nearestSection = sectionName;
                    }
                });
                
                if (nearestSection !== this.currentSectionName) {
                    this.currentSectionName = nearestSection;
                    this.updateSectionInfo(nearestSection);
                }
            }
            
            updateSectionInfo(sectionName) {
                this.currentSection.textContent = sectionName === 'welcome' ? 'Welcome' : sectionName.charAt(0).toUpperCase() + sectionName.slice(1);
                
                if (sectionName === 'welcome') {
                    this.sectionPanel.innerHTML = `
                        <h2>Welcome</h2>
                        <p>Drive around this interactive 3D world to explore my portfolio. Each colored platform contains different aspects of my work and skills.</p>
                        <h3>What you'll find:</h3>
                        <ul>
                            <li>🎯 About my background in Data Science</li>
                            <li>💼 Professional projects and achievements</li>
                            <li>🛠️ Technical skills and expertise</li>
                            <li>📞 Contact information</li>
                        </ul>
                        <p>Use WASD keys to drive and explore!</p>
                    `;
                    this.sectionPanel.classList.remove('visible');
                } else if (portfolioSections[sectionName]) {
                    this.sectionPanel.innerHTML = `
                        <h2>${portfolioSections[sectionName].title}</h2>
                        ${portfolioSections[sectionName].content}
                    `;
                    this.sectionPanel.classList.add('visible');
                }
            }
            
            setResize() {
                window.addEventListener('resize', () => {
                    this.camera.aspect = window.innerWidth / window.innerHeight;
                    this.camera.updateProjectionMatrix();
                    this.renderer.setSize(window.innerWidth, window.innerHeight);
                });
            }
            
            setTick() {
                const tick = () => {
                    // Update physics
                    this.world.step(1/60);
                    
                    // Update car
                    this.updateCar();
                    
                    // Update camera
                    this.updateCamera();
                    
                    // Update UI
                    this.updateUI();
                    
                    // Render
                    this.renderer.render(this.scene, this.camera);
                    
                    requestAnimationFrame(tick);
                };
                tick();
            }
            
            updateCar() {
                const force = new CANNON.Vec3();
                const torque = new CANNON.Vec3();
                
                if (this.keys.forward) {
                    force.set(0, 0, -this.carAcceleration);
                    this.carSpeed = Math.min(this.carSpeed + 0.5, this.carMaxSpeed);
                }
                if (this.keys.backward) {
                    force.set(0, 0, this.carAcceleration * 0.5);
                    this.carSpeed = Math.max(this.carSpeed - 0.5, -this.carMaxSpeed * 0.5);
                }
                if (this.keys.left && Math.abs(this.carSpeed) > 0.1) {
                    torque.set(0, this.carTurnSpeed * Math.sign(this.carSpeed), 0);
                }
                if (this.keys.right && Math.abs(this.carSpeed) > 0.1) {
                    torque.set(0, -this.carTurnSpeed * Math.sign(this.carSpeed), 0);
                }
                if (this.keys.brake) {
                    this.carSpeed *= 0.9;
                }
                
                // Apply friction
                this.carSpeed *= this.carFriction;
                
                // Apply forces in local space
                const localForce = new CANNON.Vec3();
                this.carBody.quaternion.vmult(force, localForce);
                this.carBody.applyForce(localForce, this.carBody.position);
                this.carBody.angularVelocity.set(torque.x, torque.y, torque.z);
                
                // Update mesh
                this.car.position.copy(this.carBody.position);
                this.car.quaternion.copy(this.carBody.quaternion);
            }
            
            updateCamera() {
                const carPosition = this.car.position;
                const carRotation = this.car.rotation;
                
                // Camera follows car
                const idealOffset = new THREE.Vector3(0, 8, 15);
                idealOffset.applyQuaternion(this.car.quaternion);
                
                const idealPosition = new THREE.Vector3().copy(carPosition).add(idealOffset);
                
                // Smooth camera movement
                this.camera.position.lerp(idealPosition, 0.1);
                this.camera.lookAt(carPosition);
            }
            
            updateUI() {
                this.speedValue.textContent = Math.abs(this.carSpeed * 5).toFixed(0);
            }
            
            startLoading() {
                let progress = 0;
                const loadingTexts = [
                    'Loading 3D world...',
                    'Initializing physics...',
                    'Creating portfolio sections...',
                    'Setting up car controls...',
                    'Finalizing experience...'
                ];
                
                const loadingInterval = setInterval(() => {
                    progress += Math.random() * 15 + 5;
                    
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(loadingInterval);
                        
                        setTimeout(() => {
                            this.loadingScreen.classList.add('hidden');
                        }, 500);
                    }
                    
                    this.loadingBar.style.width = progress + '%';
                    const textIndex = Math.floor((progress / 100) * (loadingTexts.length - 1));
                    this.loadingText.textContent = loadingTexts[textIndex] || loadingTexts[loadingTexts.length - 1];
                }, 200);
            }
        }

        // Initialize application
        window.addEventListener('load', () => {
            new Application();
        });
    </script>
</body>
</html>
